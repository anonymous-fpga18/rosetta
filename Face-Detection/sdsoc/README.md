Tutorial
------------------------------------------------------------------------

### C-simulation

The face detection benchmark has been written in C. The current version
also supports C simulation so that functionality of the algorithm can be
tested without going through the painful process of bitstream generation.

To do the C-simulation of the design enter the following command in the
main directory:

    % make csim

This will create a hls.prj directory containing all the logs for the C
simulation. The output of the face-detection can be seen in the directory
hls.prj/solution/csim/build/Output.pgm Make sure that all the faces have
been detected and marked using rectangles.

One should always do C-simulation before synthesizing the design as it
is fast and detects the trivial syntactic/algorithmic errors.

### Bitstream generation

To synthesize the design for FPGA type the following command in the main
directory:

    % make

This will produce two folders:

    ./_sds
    ./sd_card

The \_sds folder will have all the reports generated by SDSoC and
Vivado-HLS.  The sd\_card folder will have the bitstream and the
associated files which will be used to port face-detection accelerator
onto the FPGA.

The timing and utilization reports generated by Vivado-HLS can be found
in the following directory:

    _sds/vhls/haar/solution/syn/report

The log generated by Vivado-HLS can be found as:

    _sds/vhls/vivado_hls.log

The area, utilzation and timing reports generated by SDSoC can be found
in the following directory:

    _sds/reports

### Porting Face-detection accelerator onto the FPGA

To port the face-detection accelerator onto the FPGA copy all the files
in the sd\_card folder into the SD-card of the FPGA. After that you can
reboot the FPGA board and connect it to your computer using UART. Go to
the mnt folder and run face.elf binary

    $ cd /mnt
    $ ./face.elf

This will print the co-ordinates of all the rectangles detected on the
screen and will also give the time taken to detect the faces. Wait for a
while ( 4-5 seconds ) and remove the SD-card and insert it in your
computer. You will see an Output.pgm file with rectangles drawn around
all the faces. The wait time of 4-5 seconds is to make sure that this
image is written properly.

License
------------------------------------------------------------------------

face-detection benchmark is offered under the terms of the Open Source
Initiative BSD 3-Clause License. More information about this license can
be found here:

 - http://choosealicense.com/licenses/bsd-3-clause
 - http://opensource.org/licenses/BSD-3-Clause



